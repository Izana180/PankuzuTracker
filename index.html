<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚¹ãƒãƒ¼ãƒˆ Bluetooth ãƒ‡ãƒã‚¤ã‚¹ãƒˆãƒ©ãƒƒã‚«ãƒ¼</title>
  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          padding: 20px;
      }

      .container {
          max-width: 900px;
          margin: 0 auto;
          background: white;
          border-radius: 15px;
          box-shadow: 0 20px 40px rgba(0,0,0,0.1);
          overflow: hidden;
      }

      .header {
          background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
          color: white;
          padding: 30px;
          text-align: center;
      }

      .header h1 {
          font-size: 2.5rem;
          margin-bottom: 10px;
      }

      .content {
          padding: 30px;
      }

      .feature-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 20px;
          margin-bottom: 30px;
      }

      .feature-card {
          background: #f8f9ff;
          border: 2px solid #e3e8ff;
          border-radius: 12px;
          padding: 25px;
          transition: all 0.3s ease;
      }

      .feature-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      }

      .feature-card h3 {
          color: #4c51bf;
          margin-bottom: 15px;
          font-size: 1.3rem;
      }

      .btn {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          border: none;
          padding: 12px 24px;
          border-radius: 8px;
          cursor: pointer;
          font-size: 0.9rem;
          font-weight: 600;
          transition: all 0.3s ease;
          margin: 5px;
      }

      .btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      }

      .btn.secondary {
          background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
      }

      .btn.danger {
          background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
      }

      .sensor-data {
          background: #f7fafc;
          border-radius: 8px;
          padding: 15px;
          margin: 10px 0;
          border-left: 4px solid #4299e1;
      }

      .sensor-data h4 {
          color: #2d3748;
          margin-bottom: 8px;
      }

      .sensor-value {
          font-family: 'Courier New', monospace;
          background: #edf2f7;
          padding: 5px 10px;
          border-radius: 4px;
          display: inline-block;
          margin: 2px;
      }

      .device-list {
          margin-top: 20px;
      }

      .device-item {
          background: white;
          border: 1px solid #e2e8f0;
          border-radius: 8px;
          padding: 15px;
          margin-bottom: 10px;
      }

      .ai-analysis {
          background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
          border-radius: 12px;
          padding: 20px;
          margin: 20px 0;
          border-left: 5px solid #ed8936;
      }

      .ai-analysis h4 {
          color: #744210;
          margin-bottom: 10px;
          display: flex;
          align-items: center;
      }

      .ai-analysis h4::before {
          content: "ğŸ¤–";
          margin-right: 8px;
      }

      .status {
          padding: 15px;
          border-radius: 8px;
          margin: 15px 0;
          font-weight: 500;
      }

      .status.info { background: #bee3f8; color: #2c5282; }
      .status.error { background: #fed7d7; color: #742a2a; }
      .status.success { background: #c6f6d5; color: #22543d; }

      .communication-status {
          background: #e6fffa;
          border: 1px solid #81e6d9;
          border-radius: 8px;
          padding: 15px;
          margin: 15px 0;
      }

      .communication-status h4 {
          color: #234e52;
          margin-bottom: 8px;
      }

      @media (max-width: 600px) {
          .feature-grid {
              grid-template-columns: 1fr;
          }
          .content {
              padding: 20px;
          }
      }
  </style>
</head>
<body>
  <div class="container">
      <div class="header">
          <h1>ğŸ” ã‚¹ãƒãƒ¼ãƒˆ Bluetooth ãƒˆãƒ©ãƒƒã‚«ãƒ¼</h1>
          <p>AIæ­è¼‰ãƒ‡ãƒã‚¤ã‚¹ç™ºè¦‹ã‚·ã‚¹ãƒ†ãƒ </p>
      </div>

      <div class="content">
          <!-- æŠ€è¡“è¦ä»¶1: ã‚»ãƒ³ã‚·ãƒ³ã‚°æŠ€è¡“ -->
          <div class="feature-grid">
              <div class="feature-card">
                  <h3>ğŸ“¡ ã‚»ãƒ³ã‚·ãƒ³ã‚°æŠ€è¡“</h3>
                  <p>è¤‡æ•°ã‚»ãƒ³ã‚µãƒ¼ã§ãƒ‡ãƒã‚¤ã‚¹çŠ¶æ³ã‚’æ¤œçŸ¥</p>
                  <button class="btn" onclick="startSensing()">ã‚»ãƒ³ã‚·ãƒ³ã‚°é–‹å§‹</button>
                  <button class="btn secondary" onclick="calibrateSensors()">ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>

                  <div id="sensorData" style="display: none;">
                      <div class="sensor-data">
                          <h4>ğŸ§­ åŠ é€Ÿåº¦ã‚»ãƒ³ã‚µãƒ¼</h4>
                          <div id="accelerometer"></div>
                      </div>
                      <div class="sensor-data">
                          <h4>ğŸ“ GPSä½ç½®æƒ…å ±</h4>
                          <div id="location"></div>
                      </div>
                      <div class="sensor-data">
                          <h4>ğŸ“¶ Bluetoothä¿¡å·å¼·åº¦</h4>
                          <div id="bluetooth"></div>
                      </div>
                  </div>
              </div>

              <!-- æŠ€è¡“è¦ä»¶2: ãƒ‡ãƒ¼ã‚¿èªè­˜ -->
              <div class="feature-card">
                  <h3>ğŸ§  ãƒ‡ãƒ¼ã‚¿èªè­˜ãƒ»æ¨å®š</h3>
                  <p>ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’èªè­˜</p>
                  <button class="btn" onclick="analyzePattern()">ãƒ‘ã‚¿ãƒ¼ãƒ³è§£æ</button>
                  <button class="btn secondary" onclick="predictLocation()">ä½ç½®äºˆæ¸¬</button>

                  <div id="recognitionResults" style="display: none;">
                      <div class="sensor-data">
                          <h4>ğŸš¶ ç§»å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜</h4>
                          <div id="movementPattern"></div>
                      </div>
                      <div class="sensor-data">
                          <h4>ğŸ“Š ãƒ‡ãƒã‚¤ã‚¹ä½¿ç”¨é »åº¦</h4>
                          <div id="usagePattern"></div>
                      </div>
                  </div>
              </div>
          </div>

          <!-- æŠ€è¡“è¦ä»¶3: é€šä¿¡ãƒ»ãƒ‡ãƒ¼ã‚¿å…±æœ‰ -->
          <div class="feature-card">
              <h3>ğŸŒ ãƒãƒ«ãƒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé€šä¿¡</h3>
              <p>è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹é–“ã§ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿å…±æœ‰</p>
              <button class="btn" onclick="connectToServer()">ã‚µãƒ¼ãƒãƒ¼æ¥ç¶š</button>
              <button class="btn secondary" onclick="shareData()">ãƒ‡ãƒ¼ã‚¿å…±æœ‰</button>
              <button class="btn secondary" onclick="syncDevices()">ãƒ‡ãƒã‚¤ã‚¹åŒæœŸ</button>

              <div class="communication-status">
                  <h4>ğŸ“¡ é€šä¿¡çŠ¶æ³</h4>
                  <div id="connectionStatus">æœªæ¥ç¶š</div>
                  <div id="connectedClients">æ¥ç¶šã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ•°: 0</div>
              </div>
          </div>

          <!-- æŠ€è¡“è¦ä»¶4: ChatGPT APIæ´»ç”¨ -->
          <div class="feature-card">
              <h3>ğŸ¤– AIåˆ†æãƒ»ææ¡ˆã‚·ã‚¹ãƒ†ãƒ </h3>
              <p>GPTã«ã‚ˆã‚‹ç´›å¤±å ´æ‰€ã®æ¨ç†ã¨ç™ºè¦‹ææ¡ˆ</p>
              <button class="btn" onclick="getAIAnalysis()">AIåˆ†æå®Ÿè¡Œ</button>
              <button class="btn secondary" onclick="getSearchSuggestions()">æ¢ç´¢ææ¡ˆ</button>

              <div id="aiAnalysis" class="ai-analysis" style="display: none;">
                  <h4>AIåˆ†æçµæœ</h4>
                  <div id="aiContent"></div>
              </div>
          </div>

          <div id="status" class="status info" style="display: none;"></div>

          <div id="deviceList" class="device-list" style="display: none;">
              <h3>ğŸ“± æ¤œå‡ºãƒ‡ãƒã‚¤ã‚¹</h3>
          </div>
      </div>
  </div>

  <script>
      // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
      let sensorData = {
          accelerometer: { x: 0, y: 0, z: 0 },
          location: { lat: 0, lng: 0, accuracy: 0 },
          bluetooth: { devices: [], signalStrength: 0 }
      };
      let websocket = null;
      let deviceHistory = [];

      // çŠ¶æ…‹è¡¨ç¤ºé–¢æ•°
      function showStatus(message, type = 'info') {
          const statusEl = document.getElementById('status');
          statusEl.textContent = message;
          statusEl.className = `status ${type}`;
          statusEl.style.display = 'block';

          setTimeout(() => {
              statusEl.style.display = 'none';
          }, 3000);
      }

      // æŠ€è¡“è¦ä»¶1: ã‚»ãƒ³ã‚·ãƒ³ã‚°æŠ€è¡“
      async function startSensing() {
          showStatus('ã‚»ãƒ³ã‚·ãƒ³ã‚°é–‹å§‹...', 'info');
          document.getElementById('sensorData').style.display = 'block';

          // åŠ é€Ÿåº¦ã‚»ãƒ³ã‚µãƒ¼
          if ('DeviceMotionEvent' in window) {
              window.addEventListener('devicemotion', handleMotion);
          }

          // GPSä½ç½®æƒ…å ±
          if (navigator.geolocation) {
              navigator.geolocation.watchPosition(handleLocation, handleLocationError, {
                  enableHighAccuracy: true,
                  maximumAge: 30000,
                  timeout: 27000
              });
          }

          // Bluetooth
          if (navigator.bluetooth) {
              try {
                  const device = await navigator.bluetooth.requestDevice({
                      acceptAllDevices: true,
                      optionalServices: ['battery_service']
                  });
                  handleBluetoothDevice(device);
              } catch (error) {
                  console.log('Bluetooth error:', error);
              }
          }

          showStatus('ã‚»ãƒ³ã‚·ãƒ³ã‚°é–‹å§‹å®Œäº†', 'success');
      }

      function handleMotion(event) {
          sensorData.accelerometer = {
              x: event.acceleration.x?.toFixed(2) || 0,
              y: event.acceleration.y?.toFixed(2) || 0,
              z: event.acceleration.z?.toFixed(2) || 0
          };

          document.getElementById('accelerometer').innerHTML = `
              <span class="sensor-value">X: ${sensorData.accelerometer.x}</span>
              <span class="sensor-value">Y: ${sensorData.accelerometer.y}</span>
              <span class="sensor-value">Z: ${sensorData.accelerometer.z}</span>
          `;
      }

      function handleLocation(position) {
          sensorData.location = {
              lat: position.coords.latitude.toFixed(6),
              lng: position.coords.longitude.toFixed(6),
              accuracy: Math.round(position.coords.accuracy)
          };

          document.getElementById('location').innerHTML = `
              <span class="sensor-value">ç·¯åº¦: ${sensorData.location.lat}</span>
              <span class="sensor-value">çµŒåº¦: ${sensorData.location.lng}</span>
              <span class="sensor-value">ç²¾åº¦: ${sensorData.location.accuracy}m</span>
          `;
      }

      function handleLocationError(error) {
          console.log('Location error:', error);
      }

      function handleBluetoothDevice(device) {
          sensorData.bluetooth.devices.push({
              name: device.name || 'ä¸æ˜ãªãƒ‡ãƒã‚¤ã‚¹',
              id: device.id,
              timestamp: new Date().toISOString()
          });

          document.getElementById('bluetooth').innerHTML = `
              <span class="sensor-value">ãƒ‡ãƒã‚¤ã‚¹: ${device.name || 'ä¸æ˜'}</span>
              <span class="sensor-value">ä¿¡å·: å¼·</span>
          `;
      }

      // æŠ€è¡“è¦ä»¶2: ãƒ‡ãƒ¼ã‚¿èªè­˜ãƒ»æ¨å®š
      function analyzePattern() {
          showStatus('ãƒ‘ã‚¿ãƒ¼ãƒ³è§£æä¸­...', 'info');
          document.getElementById('recognitionResults').style.display = 'block';

          // åŠ é€Ÿåº¦ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ç§»å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¨å®š
          const movement = classifyMovement(sensorData.accelerometer);
          document.getElementById('movementPattern').innerHTML = `
              <span class="sensor-value">çŠ¶æ…‹: ${movement}</span>
              <span class="sensor-value">ä¿¡é ¼åº¦: 85%</span>
          `;

          // ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
          const usage = analyzeUsagePattern();
          document.getElementById('usagePattern').innerHTML = `
              <span class="sensor-value">é »åº¦: ${usage.frequency}</span>
              <span class="sensor-value">æœ€çµ‚ä½¿ç”¨: ${usage.lastUsed}</span>
          `;

          showStatus('ãƒ‘ã‚¿ãƒ¼ãƒ³è§£æå®Œäº†', 'success');
      }

      function classifyMovement(accel) {
          const magnitude = Math.sqrt(accel.x**2 + accel.y**2 + accel.z**2);
          if (magnitude < 0.5) return "é™æ­¢";
          if (magnitude < 2.0) return "æ­©è¡Œ";
          if (magnitude < 5.0) return "èµ°è¡Œ";
          return "æ¿€ã—ã„é‹å‹•";
      }

      function analyzeUsagePattern() {
          return {
              frequency: "é«˜",
              lastUsed: "2æ™‚é–“å‰"
          };
      }

      function predictLocation() {
          showStatus('ä½ç½®äºˆæ¸¬ä¸­...', 'info');
          // æ©Ÿæ¢°å­¦ç¿’ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ä½ç½®äºˆæ¸¬ï¼ˆç°¡æ˜“ç‰ˆï¼‰
          setTimeout(() => {
              showStatus('äºˆæ¸¬å®Œäº†: ãƒªãƒ“ãƒ³ã‚°ãƒ«ãƒ¼ãƒ  (ç¢ºç‡: 78%)', 'success');
          }, 2000);
      }

      // æŠ€è¡“è¦ä»¶3: é€šä¿¡ãƒ»ãƒ‡ãƒ¼ã‚¿å…±æœ‰
      function connectToServer() {
          showStatus('ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šä¸­...', 'info');

          // WebSocketæ¥ç¶šï¼ˆç‹¬è‡ªãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼‰
          websocket = new WebSocket('ws://localhost:8080');

          websocket.onopen = function() {
              document.getElementById('connectionStatus').textContent = 'æ¥ç¶šæ¸ˆã¿';
              showStatus('ã‚µãƒ¼ãƒãƒ¼æ¥ç¶šæˆåŠŸ', 'success');

              // ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ãƒãƒ³ãƒ‰ã‚·ã‚§ã‚¤ã‚¯
              websocket.send(JSON.stringify({
                  type: 'HANDSHAKE',
                  clientId: generateClientId(),
                  timestamp: new Date().toISOString()
              }));
          };

          websocket.onmessage = function(event) {
              const data = JSON.parse(event.data);
              handleServerMessage(data);
          };

          websocket.onerror = function() {
              showStatus('ã‚µãƒ¼ãƒãƒ¼æ¥ç¶šã‚¨ãƒ©ãƒ¼ï¼ˆãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ï¼‰', 'error');
              // ãƒ‡ãƒ¢ç”¨ã®æ¨¡æ“¬æ¥ç¶š
              setTimeout(() => {
                  document.getElementById('connectionStatus').textContent = 'æ¥ç¶šæ¸ˆã¿ï¼ˆãƒ‡ãƒ¢ï¼‰';
                  document.getElementById('connectedClients').textContent = 'æ¥ç¶šã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ•°: 3';
              }, 1000);
          };
      }

      function shareData() {
          if (websocket && websocket.readyState === WebSocket.OPEN) {
              websocket.send(JSON.stringify({
                  type: 'SENSOR_DATA',
                  data: sensorData,
                  timestamp: new Date().toISOString()
              }));
              showStatus('ãƒ‡ãƒ¼ã‚¿å…±æœ‰å®Œäº†', 'success');
          } else {
              showStatus('ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰: ãƒ‡ãƒ¼ã‚¿å…±æœ‰ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ', 'info');
          }
      }

      function syncDevices() {
          showStatus('ãƒ‡ãƒã‚¤ã‚¹åŒæœŸä¸­...', 'info');
          setTimeout(() => {
              showStatus('3å°ã®ãƒ‡ãƒã‚¤ã‚¹ã¨åŒæœŸå®Œäº†', 'success');
          }, 1500);
      }

      function generateClientId() {
          return 'client_' + Math.random().toString(36).substr(2, 9);
      }

      function handleServerMessage(data) {
          switch(data.type) {
              case 'CLIENT_COUNT':
                  document.getElementById('connectedClients').textContent = 
                      `æ¥ç¶šã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ•°: ${data.count}`;
                  break;
              case 'DEVICE_FOUND':
                  showStatus(`ä»–ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒãƒ‡ãƒã‚¤ã‚¹ã‚’ç™ºè¦‹: ${data.deviceName}`, 'success');
                  break;
          }
      }

      // æŠ€è¡“è¦ä»¶4: ChatGPT APIæ´»ç”¨
      async function getAIAnalysis() {
          showStatus('AIåˆ†æä¸­...', 'info');
          document.getElementById('aiAnalysis').style.display = 'block';

          // ChatGPT APIã‚’ä½¿ã£ãŸåˆ†æï¼ˆãƒ‡ãƒ¢ç‰ˆï¼‰
          const analysisPrompt = generateAnalysisPrompt();

          try {
              // å®Ÿéš›ã®APIå‘¼ã³å‡ºã—ã®ä»£ã‚ã‚Šã«ãƒ‡ãƒ¢ãƒ¬ã‚¹ãƒãƒ³ã‚¹
              setTimeout(() => {
                  const aiResponse = `
                      <strong>åˆ†æçµæœ:</strong><br>
                      ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã¨ä½ç½®å±¥æ­´ã‹ã‚‰åˆ¤æ–­ã™ã‚‹ã¨ã€ã‚ãªãŸã®Bluetoothãƒ‡ãƒã‚¤ã‚¹ã¯ä»¥ä¸‹ã®å ´æ‰€ã«ã‚ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ï¼š<br><br>

                      <strong>1. ãƒªãƒ“ãƒ³ã‚°ãƒ«ãƒ¼ãƒ  (ç¢ºç‡: 78%)</strong><br>
                      - æœ€å¾Œã®å¼·ã„ä¿¡å·æ¤œå‡ºåœ°ç‚¹<br>
                      - æ™®æ®µã®ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ä¸€è‡´<br><br>

                      <strong>2. å¯å®¤ (ç¢ºç‡: 15%)</strong><br>
                      - å¤œé–“ã®ç§»å‹•å±¥æ­´ã‚ã‚Š<br><br>

                      <strong>3. è»Šå†… (ç¢ºç‡: 7%)</strong><br>
                      - å¤–å‡ºæ™‚ã®ä½ç½®ãƒ‡ãƒ¼ã‚¿ã¨é–¢é€£<br><br>

                      <strong>æ¨å¥¨è¡Œå‹•:</strong><br>
                      1. ã¾ãšãƒªãƒ“ãƒ³ã‚°ã®ã‚½ãƒ•ã‚¡å‘¨è¾ºã‚’ç¢ºèª<br>
                      2. ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã®ä¸‹ã‚„éš™é–“ã‚’ãƒã‚§ãƒƒã‚¯<br>
                      3. ä»–ã®ãƒ‡ãƒã‚¤ã‚¹ã§éŸ³ã‚’é³´ã‚‰ã™æ©Ÿèƒ½ã‚’è©¦ã™
                  `;

                  document.getElementById('aiContent').innerHTML = aiResponse;
                  showStatus('AIåˆ†æå®Œäº†', 'success');
              }, 2000);

          } catch (error) {
              showStatus('AIåˆ†æã‚¨ãƒ©ãƒ¼', 'error');
          }
      }

      function getSearchSuggestions() {
          showStatus('æ¢ç´¢ææ¡ˆç”Ÿæˆä¸­...', 'info');

          setTimeout(() => {
              const suggestions = `
                  <strong>ã‚¹ãƒãƒ¼ãƒˆæ¢ç´¢ææ¡ˆ:</strong><br><br>

                  <strong>ğŸ” æ®µéšçš„æ¢ç´¢ãƒ—ãƒ©ãƒ³:</strong><br>
                  1. <strong>è¿‘è·é›¢æ¢ç´¢</strong> - åŠå¾„5mä»¥å†…ã‚’Bluetoothä¿¡å·ã§æ¢ç´¢<br>
                  2. <strong>éŸ³éŸ¿æ¢ç´¢</strong> - ä»–ã®ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰éŸ³ã‚’é³´ã‚‰ã™<br>
                  3. <strong>å±¥æ­´æ¢ç´¢</strong> - éå»24æ™‚é–“ã®ä½ç½®ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª<br><br>

                  <strong>ğŸ¤– AIæœ€é©åŒ–ãƒ«ãƒ¼ãƒˆ:</strong><br>
                  ãƒªãƒ“ãƒ³ã‚° â†’ ã‚­ãƒƒãƒãƒ³ â†’ å¯å®¤ â†’ ç„é–¢<br>
                  (åŠ¹ç‡æ€§ã‚¹ã‚³ã‚¢: 94%)
              `;

              document.getElementById('aiContent').innerHTML = suggestions;
              showStatus('æ¢ç´¢ææ¡ˆç”Ÿæˆå®Œäº†', 'success');
          }, 1500);
      }

      function generateAnalysisPrompt() {
          return `
              ä»¥ä¸‹ã®ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã¦ã€ç´›å¤±ã—ãŸBluetoothãƒ‡ãƒã‚¤ã‚¹ã®ä½ç½®ã‚’æ¨ç†ã—ã¦ãã ã•ã„ï¼š

              åŠ é€Ÿåº¦ãƒ‡ãƒ¼ã‚¿: ${JSON.stringify(sensorData.accelerometer)}
              ä½ç½®ãƒ‡ãƒ¼ã‚¿: ${JSON.stringify(sensorData.location)}
              Bluetoothãƒ‡ãƒ¼ã‚¿: ${JSON.stringify(sensorData.bluetooth)}

              ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨çµ„ã¿åˆã‚ã›ã¦ã€æœ€ã‚‚å¯èƒ½æ€§ã®é«˜ã„å ´æ‰€ã‚’3ã¤ææ¡ˆã—ã¦ãã ã•ã„ã€‚
          `;
      }

      function calibrateSensors() {
          showStatus('ã‚»ãƒ³ã‚µãƒ¼ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸­...', 'info');
          setTimeout(() => {
              showStatus('ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†', 'success');
          }, 2000);
      }

      // åˆæœŸåŒ–
      window.addEventListener('load', () => {
          showStatus('ã‚¹ãƒãƒ¼ãƒˆãƒˆãƒ©ãƒƒã‚«ãƒ¼ã‚·ã‚¹ãƒ†ãƒ æº–å‚™å®Œäº†', 'success');
      });
  </script>
</body>
</html>